<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>GAP (CAP) - Chapter 8: Managing Derived Methods</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="generator" content="GAPDoc2HTML" />
<link rel="stylesheet" type="text/css" href="manual.css" />
<script src="manual.js" type="text/javascript"></script>
<script type="text/javascript">overwriteStyle();</script>
</head>
<body class="chap8"  onload="jscontent()">


<div class="chlinktop"><span class="chlink1">Goto Chapter: </span><a href="chap0.html">Top</a>  <a href="chap1.html">1</a>  <a href="chap2.html">2</a>  <a href="chap3.html">3</a>  <a href="chap4.html">4</a>  <a href="chap5.html">5</a>  <a href="chap6.html">6</a>  <a href="chap7.html">7</a>  <a href="chap8.html">8</a>  <a href="chap9.html">9</a>  <a href="chap10.html">10</a>  <a href="chap11.html">11</a>  <a href="chap12.html">12</a>  <a href="chapInd.html">Ind</a>  </div>

<div class="chlinkprevnexttop">&nbsp;<a href="chap0.html">[Top of Book]</a>&nbsp;  <a href="chap0.html#contents">[Contents]</a>&nbsp;  &nbsp;<a href="chap7.html">[Previous Chapter]</a>&nbsp;  &nbsp;<a href="chap9.html">[Next Chapter]</a>&nbsp;  </div>

<p id="mathjaxlink" class="pcenter"><a href="chap8_mj.html">[MathJax on]</a></p>
<p><a id="X8397FA067BFF4850" name="X8397FA067BFF4850"></a></p>
<div class="ChapSects"><a href="chap8.html#X8397FA067BFF4850">8 <span class="Heading">Managing Derived Methods</span></a>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap8.html#X7EBFC26F83EB9F72">8.1 <span class="Heading">Info Class</span></a>
</span>
<div class="ContSSBlock">
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X847BF8788620ADEC">8.1-1 DerivationInfo</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X82EB820C81919BD5">8.1-2 ActivateDerivationInfo</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7853FBCF7DAA6AD1">8.1-3 DeactivateDerivationInfo</a></span>
</div></div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap8.html#X85225AB582EE9B06">8.2 <span class="Heading">Derivation Objects</span></a>
</span>
<div class="ContSSBlock">
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7E30DF4F8029D24F">8.2-1 IsDerivedMethod</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7A9081ED8334054B">8.2-2 MakeDerivation</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X85FA69CA831B3D68">8.2-3 DerivationName</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X8039396185E25B0C">8.2-4 DerivationWeight</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X8509D9897EC94507">8.2-5 DerivationFunctionsWithExtraFilters</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7F2B7310826D555B">8.2-6 CategoryFilter</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7CA199A3868E0222">8.2-7 IsApplicableToCategory</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X82E56CD47C15FE34">8.2-8 TargetOperation</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7A407F3F7F264A77">8.2-9 UsedOperations</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X78FAD4788098483B">8.2-10 UsedOperationMultiples</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X80FA45B68744108E">8.2-11 UsedOperationsWithMultiples</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7DCED23B84345454">8.2-12 InstallDerivationForCategory</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X82546C667C204B78">8.2-13 DerivationResultWeight</a></span>
</div></div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap8.html#X87186DAD7DF242ED">8.3 <span class="Heading">Derivation Graphs</span></a>
</span>
<div class="ContSSBlock">
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7BFD964E8739600C">8.3-1 IsDerivedMethodGraph</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7E19A0AD8661EF00">8.3-2 MakeDerivationGraph</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7B801088854A0127">8.3-3 AddOperationsToDerivationGraph</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7DEBC71E8450F86A">8.3-4 AddDerivation</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X85CADCFF85BBF867">8.3-5 AddDerivation</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X8669A64F7BB2C4FB">8.3-6 AddDerivation</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X8027604D8282F123">8.3-7 AddDerivation</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X80E6AA06854AAF28">8.3-8 AddDerivationPair</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X85F0182679C6E863">8.3-9 AddDerivationPair</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X801E2F4E86008850">8.3-10 AddDerivationPair</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7F31CF457FF00EF5">8.3-11 AddDerivationPair</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7BC80B4F7A067D91">8.3-12 AddDerivationToCAP</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X81358A4C862A8BC1">8.3-13 AddDerivationPairToCAP</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X8263F4547BBF28C7">8.3-14 AddWithGivenDerivationPairToCAP</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X8669CCC78175B23B">8.3-15 Operations</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7D8B5FE482B39913">8.3-16 DerivationsUsingOperation</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7A4C262581C53309">8.3-17 DerivationsOfOperation</a></span>
</div></div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap8.html#X86F129738355A31B">8.4 <span class="Heading">Managing Derivations in a Category</span></a>
</span>
<div class="ContSSBlock">
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X832B6935788EA870">8.4-1 IsOperationWeightList</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7CFC7F17786B1B6E">8.4-2 MakeOperationWeightList</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7E6F8469808FE57E">8.4-3 DerivationGraph</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X80E9071D87ABCA57">8.4-4 CategoryOfOperationWeightList</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7BE16AB2849D0107">8.4-5 CurrentOperationWeight</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7A67FC1B80BF67AD">8.4-6 OperationWeightUsingDerivation</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X79490A257E67804E">8.4-7 DerivationOfOperation</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X8411326D85222A6C">8.4-8 InstallDerivationsUsingOperation</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7E2279C47AFE3FAD">8.4-9 Reevaluate</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X835210E67EF93118">8.4-10 AddPrimitiveOperation</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X8145094E862826BE">8.4-11 PrintDerivationTree</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7E59037F7B4E42D0">8.4-12 PrintTree</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X8293EF6286A82480">8.4-13 PrintTreeRec</a></span>
</div></div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap8.html#X85B1CCCC81C1A631">8.5 <span class="Heading">Min Heaps for Strings</span></a>
</span>
<div class="ContSSBlock">
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X86D1D85F828978AE">8.5-1 IsStringMinHeap</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X812EDE3F8737AB9D">8.5-2 StringMinHeap</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X80604054823A6F01">8.5-3 Add</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7E136159853A3BAC">8.5-4 ExtractMin</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X79B2FB2178CC6A34">8.5-5 DecreaseKey</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7CEECD45781A49A3">8.5-6 IsEmptyHeap</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7E1CEFDB7824EE94">8.5-7 HeapSize</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X82F874FB7954D662">8.5-8 Contains</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X7AE2A000800CD0A2">8.5-9 Swap</a></span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap8.html#X78B8D0BD7A2FE83A">8.5-10 Heapify</a></span>
</div></div>
</div>

<h3>8 <span class="Heading">Managing Derived Methods</span></h3>

<p><a id="X7EBFC26F83EB9F72" name="X7EBFC26F83EB9F72"></a></p>

<h4>8.1 <span class="Heading">Info Class</span></h4>

<p><a id="X847BF8788620ADEC" name="X847BF8788620ADEC"></a></p>

<h5>8.1-1 DerivationInfo</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; DerivationInfo</code></td><td class="tdright">( info class )</td></tr></table></div>
<p>Info class for derivations.</p>

<p><a id="X82EB820C81919BD5" name="X82EB820C81919BD5"></a></p>

<h5>8.1-2 ActivateDerivationInfo</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; ActivateDerivationInfo</code>( <var class="Arg">arg</var> )</td><td class="tdright">( function )</td></tr></table></div>
<p><a id="X7853FBCF7DAA6AD1" name="X7853FBCF7DAA6AD1"></a></p>

<h5>8.1-3 DeactivateDerivationInfo</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; DeactivateDerivationInfo</code>( <var class="Arg">arg</var> )</td><td class="tdright">( function )</td></tr></table></div>
<p><a id="X85225AB582EE9B06" name="X85225AB582EE9B06"></a></p>

<h4>8.2 <span class="Heading">Derivation Objects</span></h4>

<p><a id="X7E30DF4F8029D24F" name="X7E30DF4F8029D24F"></a></p>

<h5>8.2-1 IsDerivedMethod</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; IsDerivedMethod</code>( <var class="Arg">arg</var> )</td><td class="tdright">( filter )</td></tr></table></div>
<p>Returns: <code class="code">true</code> or <code class="code">false</code></p>

<p>A derivation object describes a derived method. It contains information about which operation the derived method implements, and which other operations it relies on.</p>

<p><a id="X7A9081ED8334054B" name="X7A9081ED8334054B"></a></p>

<h5>8.2-2 MakeDerivation</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; MakeDerivation</code>( <var class="Arg">name</var>, <var class="Arg">target_op</var>, <var class="Arg">used_ops_with_multiples</var>, <var class="Arg">weight</var>, <var class="Arg">implementations_with_extra_filters</var>, <var class="Arg">category_filter</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Creates a new derivation object. The argument <var class="Arg">name</var> is an arbitrary name used to identify this derivation, and is useful only for debugging purposes. The argument <var class="Arg">target_op</var> is the operation which the derived method implements. The argument <var class="Arg">used_ops_with_multiples</var> contains each operation used by the derived method, together with a positive integer specifying how many times that operation is used. This is given as a list of lists, where each sublist has as first entry an operation and as second entry an integer. The argument <var class="Arg">weight</var> is an additional number to add when calculating the resulting weight of the target operation using this derivation. Unless there is any particular reason to regard the derivation as exceedingly expensive, this number should be <code class="code">1</code>. The argument <var class="Arg">implementations_with_extra_filters</var> contains one or more functions with the actual implementation of the derived method, together with lists of extra argument filters for each function. The argument is a list with entries of the form <code class="code">[fun, filters]</code>, where <code class="code">fun</code> is a function and <code class="code">filters</code> is a (not necessarily dense) list of argument filters. If only one function is given, then <code class="code">filters</code> should be the empty list; in this case the argument's value would be [[fun,[]]], where <code class="code">fun</code> is the function. The argument <var class="Arg">category_filter</var> is a filter describing which categories the derivation is valid for. If it is valid for all categories, then this argument should have the value <code class="code">IsCapCategory</code>.</p>

<p><a id="X85FA69CA831B3D68" name="X85FA69CA831B3D68"></a></p>

<h5>8.2-3 DerivationName</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; DerivationName</code>( <var class="Arg">d</var> )</td><td class="tdright">( attribute )</td></tr></table></div>
<p>The name of the derivation. This is a name identifying this particular derivation, and normally not the same as the name of the operation implemented by the derivation.</p>

<p><a id="X8039396185E25B0C" name="X8039396185E25B0C"></a></p>

<h5>8.2-4 DerivationWeight</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; DerivationWeight</code>( <var class="Arg">d</var> )</td><td class="tdright">( attribute )</td></tr></table></div>
<p>Extra weight for the derivation.</p>

<p><a id="X8509D9897EC94507" name="X8509D9897EC94507"></a></p>

<h5>8.2-5 DerivationFunctionsWithExtraFilters</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; DerivationFunctionsWithExtraFilters</code>( <var class="Arg">d</var> )</td><td class="tdright">( attribute )</td></tr></table></div>
<p>The implementation(s) of the derivation, together with lists of extra filters for each implementation.</p>

<p><a id="X7F2B7310826D555B" name="X7F2B7310826D555B"></a></p>

<h5>8.2-6 CategoryFilter</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; CategoryFilter</code>( <var class="Arg">d</var> )</td><td class="tdright">( attribute )</td></tr></table></div>
<p>Filter describing which categories the derivation is valid for.</p>

<p><a id="X7CA199A3868E0222" name="X7CA199A3868E0222"></a></p>

<h5>8.2-7 IsApplicableToCategory</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; IsApplicableToCategory</code>( <var class="Arg">d</var>, <var class="Arg">C</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Returns: <code class="code">true</code> if the category <var class="Arg">C</var> is known to satisfy the category filter of the derivation <var class="Arg">d</var>.</p>

<p>Checks if the derivation is known to be valid for a given category.</p>

<p><a id="X82E56CD47C15FE34" name="X82E56CD47C15FE34"></a></p>

<h5>8.2-8 TargetOperation</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; TargetOperation</code>( <var class="Arg">d</var> )</td><td class="tdright">( attribute )</td></tr></table></div>
<p>Returns: The name (as a string) of the operation implemented by the derivation <var class="Arg">d</var></p>

<p><a id="X7A407F3F7F264A77" name="X7A407F3F7F264A77"></a></p>

<h5>8.2-9 UsedOperations</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; UsedOperations</code>( <var class="Arg">d</var> )</td><td class="tdright">( attribute )</td></tr></table></div>
<p>Returns: The names (as strings) of the operations used by the derivation <var class="Arg">d</var></p>

<p><a id="X78FAD4788098483B" name="X78FAD4788098483B"></a></p>

<h5>8.2-10 UsedOperationMultiples</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; UsedOperationMultiples</code>( <var class="Arg">d</var> )</td><td class="tdright">( attribute )</td></tr></table></div>
<p>Returns: Multiplicities of each operation used by the derivation <var class="Arg">d</var>, in order corresponding to the operation names returned by <code class="code">UsedOperations(d)</code>.</p>

<p><a id="X80FA45B68744108E" name="X80FA45B68744108E"></a></p>

<h5>8.2-11 UsedOperationsWithMultiples</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; UsedOperationsWithMultiples</code>( <var class="Arg">d</var> )</td><td class="tdright">( attribute )</td></tr></table></div>
<p>Returns: The names of the operations used by the derivation <var class="Arg">d</var>, together with their multiplicities. The result is a list consisting of lists of the form <code class="code">[op_name, mult]</code>, where <code class="code">op_name</code> is a string and <code class="code">mult</code> a positive integer.</p>

<p><a id="X7DCED23B84345454" name="X7DCED23B84345454"></a></p>

<h5>8.2-12 InstallDerivationForCategory</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; InstallDerivationForCategory</code>( <var class="Arg">d</var>, <var class="Arg">weight</var>, <var class="Arg">C</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Install the derived method <var class="Arg">d</var> for the category <var class="Arg">C</var>. The integer <var class="Arg">weight</var> is the computed weight of the operation implemented by this derivation.</p>

<p><a id="X82546C667C204B78" name="X82546C667C204B78"></a></p>

<h5>8.2-13 DerivationResultWeight</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; DerivationResultWeight</code>( <var class="Arg">d</var>, <var class="Arg">op_weights</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Computes the resulting weight of the target operation of this derivation given a list of weights for the operations it uses. The argument <var class="Arg">op_weights</var> should be a list of integers specifying weights for the operations given by <code class="code">UsedOperations( d )</code>, in the same order.</p>

<p><a id="X87186DAD7DF242ED" name="X87186DAD7DF242ED"></a></p>

<h4>8.3 <span class="Heading">Derivation Graphs</span></h4>

<p><a id="X7BFD964E8739600C" name="X7BFD964E8739600C"></a></p>

<h5>8.3-1 IsDerivedMethodGraph</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; IsDerivedMethodGraph</code>( <var class="Arg">arg</var> )</td><td class="tdright">( filter )</td></tr></table></div>
<p>Returns: <code class="code">true</code> or <code class="code">false</code></p>

<p>A derivation graph consists of a set of operations and a set of derivations specifying how some operations can be implemented in terms of other operations.</p>

<p><a id="X7E19A0AD8661EF00" name="X7E19A0AD8661EF00"></a></p>

<h5>8.3-2 MakeDerivationGraph</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; MakeDerivationGraph</code>( <var class="Arg">operations</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Make a derivation graph containing the given set of operations and no derivations. The argument <var class="Arg">operations</var> should be a list of strings, the names of the operations. The set of operations is fixed once the graph is created. Derivations can be added to the graph by calling <code class="code">AddDerivation</code>.</p>

<p><a id="X7B801088854A0127" name="X7B801088854A0127"></a></p>

<h5>8.3-3 AddOperationsToDerivationGraph</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; AddOperationsToDerivationGraph</code>( <var class="Arg">graph</var>, <var class="Arg">operations</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Adds a list of operation names <var class="Arg">operations</var> to a given derivation graph <var class="Arg">graph</var>. This is used in extensions of CAP which want to have their own primitive operations, but do not want to pollute the CAP kernel any more. Please use it with caution. If a weight list/category was created before it will not be aware of the operations.</p>

<p><a id="X7DEBC71E8450F86A" name="X7DEBC71E8450F86A"></a></p>

<h5>8.3-4 AddDerivation</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; AddDerivation</code>( <var class="Arg">G</var>, <var class="Arg">d</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Add a derivation to a derivation graph.</p>

<p><a id="X85CADCFF85BBF867" name="X85CADCFF85BBF867"></a></p>

<h5>8.3-5 AddDerivation</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; AddDerivation</code>( <var class="Arg">arg1</var>, <var class="Arg">arg2</var>, <var class="Arg">arg3</var>, <var class="Arg">arg4</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p><a id="X8669A64F7BB2C4FB" name="X8669A64F7BB2C4FB"></a></p>

<h5>8.3-6 AddDerivation</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; AddDerivation</code>( <var class="Arg">arg1</var>, <var class="Arg">arg2</var>, <var class="Arg">arg3</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p><a id="X8027604D8282F123" name="X8027604D8282F123"></a></p>

<h5>8.3-7 AddDerivation</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; AddDerivation</code>( <var class="Arg">arg1</var>, <var class="Arg">arg2</var>, <var class="Arg">arg3</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p><a id="X80E6AA06854AAF28" name="X80E6AA06854AAF28"></a></p>

<h5>8.3-8 AddDerivationPair</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; AddDerivationPair</code>( <var class="Arg">arg1</var>, <var class="Arg">arg2</var>, <var class="Arg">arg3</var>, <var class="Arg">arg4</var>, <var class="Arg">arg5</var>, <var class="Arg">arg6</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p><a id="X85F0182679C6E863" name="X85F0182679C6E863"></a></p>

<h5>8.3-9 AddDerivationPair</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; AddDerivationPair</code>( <var class="Arg">arg1</var>, <var class="Arg">arg2</var>, <var class="Arg">arg3</var>, <var class="Arg">arg4</var>, <var class="Arg">arg5</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p><a id="X801E2F4E86008850" name="X801E2F4E86008850"></a></p>

<h5>8.3-10 AddDerivationPair</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; AddDerivationPair</code>( <var class="Arg">arg1</var>, <var class="Arg">arg2</var>, <var class="Arg">arg3</var>, <var class="Arg">arg4</var>, <var class="Arg">arg5</var>, <var class="Arg">arg6</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p><a id="X7F31CF457FF00EF5" name="X7F31CF457FF00EF5"></a></p>

<h5>8.3-11 AddDerivationPair</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; AddDerivationPair</code>( <var class="Arg">arg1</var>, <var class="Arg">arg2</var>, <var class="Arg">arg3</var>, <var class="Arg">arg4</var>, <var class="Arg">arg5</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p><a id="X7BC80B4F7A067D91" name="X7BC80B4F7A067D91"></a></p>

<h5>8.3-12 AddDerivationToCAP</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; AddDerivationToCAP</code>( <var class="Arg">arg</var> )</td><td class="tdright">( function )</td></tr></table></div>
<p><a id="X81358A4C862A8BC1" name="X81358A4C862A8BC1"></a></p>

<h5>8.3-13 AddDerivationPairToCAP</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; AddDerivationPairToCAP</code>( <var class="Arg">arg</var> )</td><td class="tdright">( function )</td></tr></table></div>
<p><a id="X8263F4547BBF28C7" name="X8263F4547BBF28C7"></a></p>

<h5>8.3-14 AddWithGivenDerivationPairToCAP</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; AddWithGivenDerivationPairToCAP</code>( <var class="Arg">arg</var> )</td><td class="tdright">( function )</td></tr></table></div>
<p><a id="X8669CCC78175B23B" name="X8669CCC78175B23B"></a></p>

<h5>8.3-15 Operations</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; Operations</code>( <var class="Arg">G</var> )</td><td class="tdright">( attribute )</td></tr></table></div>
<p>Gives the operations in the graph <var class="Arg">G</var>, as a list of strings.</p>

<p><a id="X7D8B5FE482B39913" name="X7D8B5FE482B39913"></a></p>

<h5>8.3-16 DerivationsUsingOperation</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; DerivationsUsingOperation</code>( <var class="Arg">G</var>, <var class="Arg">op_name</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Finds all the derivations in the graph <var class="Arg">G</var> that use the operation named <var class="Arg">op_name</var>, and returns them as a list.</p>

<p><a id="X7A4C262581C53309" name="X7A4C262581C53309"></a></p>

<h5>8.3-17 DerivationsOfOperation</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; DerivationsOfOperation</code>( <var class="Arg">G</var>, <var class="Arg">op_name</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Finds all the derivations in the graph <var class="Arg">G</var> targeting the operation named <var class="Arg">op_name</var> (that is, the derivations that provide implementations of this operation), and returns them as a list.</p>

<p><a id="X86F129738355A31B" name="X86F129738355A31B"></a></p>

<h4>8.4 <span class="Heading">Managing Derivations in a Category</span></h4>

<p><a id="X832B6935788EA870" name="X832B6935788EA870"></a></p>

<h5>8.4-1 IsOperationWeightList</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; IsOperationWeightList</code>( <var class="Arg">arg</var> )</td><td class="tdright">( filter )</td></tr></table></div>
<p>Returns: <code class="code">true</code> or <code class="code">false</code></p>

<p>An operation weight list manages the use of derivations in a single category <span class="Math">C</span>. For every operation, it keeps a weight value which indicates how costly it is to perform that operation in the category <span class="Math">C</span>. Whenever a new operation is implemented in <span class="Math">C</span>, the operation weight list should be notified about this and given a weight to assign to this operation. It will then automatically install all possible derived methods for <span class="Math">C</span> in such a way that every operation has the smallest possible weight (the weight of a derived method is computed by using the weights of the operations it uses; see <code class="code">DerivationResultWeight</code>).</p>

<p><a id="X7CFC7F17786B1B6E" name="X7CFC7F17786B1B6E"></a></p>

<h5>8.4-2 MakeOperationWeightList</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; MakeOperationWeightList</code>( <var class="Arg">C</var>, <var class="Arg">G</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Create the operation weight list for a category. This should only be done once for every category, and the category should afterwards remember the returned object. The argument <var class="Arg">C</var> is the CAP category this operation weight list is associated to, and the argument <var class="Arg">G</var> is a derivation graph containing operation names and derivations.</p>

<p><a id="X7E6F8469808FE57E" name="X7E6F8469808FE57E"></a></p>

<h5>8.4-3 DerivationGraph</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; DerivationGraph</code>( <var class="Arg">owl</var> )</td><td class="tdright">( attribute )</td></tr></table></div>
<p>Returns the derivation graph used by the operation weight list <var class="Arg">owl</var>.</p>

<p><a id="X80E9071D87ABCA57" name="X80E9071D87ABCA57"></a></p>

<h5>8.4-4 CategoryOfOperationWeightList</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; CategoryOfOperationWeightList</code>( <var class="Arg">owl</var> )</td><td class="tdright">( attribute )</td></tr></table></div>
<p>Returns the CAP category associated to the operation weight list <var class="Arg">owl</var>.</p>

<p><a id="X7BE16AB2849D0107" name="X7BE16AB2849D0107"></a></p>

<h5>8.4-5 CurrentOperationWeight</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; CurrentOperationWeight</code>( <var class="Arg">owl</var>, <var class="Arg">op_name</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Returns the current weight of the operation named <var class="Arg">op_name</var>.</p>

<p><a id="X7A67FC1B80BF67AD" name="X7A67FC1B80BF67AD"></a></p>

<h5>8.4-6 OperationWeightUsingDerivation</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; OperationWeightUsingDerivation</code>( <var class="Arg">owl</var>, <var class="Arg">d</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Finds out what the weight of the operation implemented by the derivation <var class="Arg">d</var> would be if we had used that derivation.</p>

<p><a id="X79490A257E67804E" name="X79490A257E67804E"></a></p>

<h5>8.4-7 DerivationOfOperation</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; DerivationOfOperation</code>( <var class="Arg">owl</var>, <var class="Arg">op_name</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Returns the derivation which is currently used to implement the operation named <var class="Arg">op_name</var>. If the operation is not implemented by a derivation (that is, either implemented directly or not implemented at all), then <code class="code">fail</code> is returned.</p>

<p><a id="X8411326D85222A6C" name="X8411326D85222A6C"></a></p>

<h5>8.4-8 InstallDerivationsUsingOperation</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; InstallDerivationsUsingOperation</code>( <var class="Arg">owl</var>, <var class="Arg">op_name</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Performs a search from the operation <var class="Arg">op_name</var>, and installs all derivations that give improvements over the current state. This is used internally by <code class="code">AddPrimitiveOperation</code> and <code class="code">Reevaluate</code>. It should normally not be necessary to call this function directly.</p>

<p><a id="X7E2279C47AFE3FAD" name="X7E2279C47AFE3FAD"></a></p>

<h5>8.4-9 Reevaluate</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; Reevaluate</code>( <var class="Arg">owl</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Reevaluate the installed derivations, installing better derivations if possible. This should be called if new derivations become available for the category, either because the category has acquired more knowledge about itself (e.g. it is told that it is abelian) or because new derivations have been added to the graph.</p>

<p><a id="X835210E67EF93118" name="X835210E67EF93118"></a></p>

<h5>8.4-10 AddPrimitiveOperation</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; AddPrimitiveOperation</code>( <var class="Arg">owl</var>, <var class="Arg">op_name</var>, <var class="Arg">weight</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Add the operation named <var class="Arg">op_name</var> to the operation weight list <var class="Arg">owl</var> with weight <var class="Arg">weight</var>. This causes all operations that can be derived, directly or indirectly, from the newly added operation to be installed as well (unless they are already installed with the same or lower weight).</p>

<p><a id="X8145094E862826BE" name="X8145094E862826BE"></a></p>

<h5>8.4-11 PrintDerivationTree</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; PrintDerivationTree</code>( <var class="Arg">owl</var>, <var class="Arg">op_name</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Print a tree representation of the way the operation named <var class="Arg">op_name</var> is implemented in the category of the operation weight list <var class="Arg">owl</var>.</p>

<p><a id="X7E59037F7B4E42D0" name="X7E59037F7B4E42D0"></a></p>

<h5>8.4-12 PrintTree</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; PrintTree</code>( <var class="Arg">arg1</var>, <var class="Arg">arg2</var>, <var class="Arg">arg3</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Prints a tree structure.</p>

<p><a id="X8293EF6286A82480" name="X8293EF6286A82480"></a></p>

<h5>8.4-13 PrintTreeRec</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; PrintTreeRec</code>( <var class="Arg">arg1</var>, <var class="Arg">arg2</var>, <var class="Arg">arg3</var>, <var class="Arg">arg4</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p><a id="X85B1CCCC81C1A631" name="X85B1CCCC81C1A631"></a></p>

<h4>8.5 <span class="Heading">Min Heaps for Strings</span></h4>

<p>This section describes an implementation of min heaps for storing strings with associated integer keys, used internally by operation weight lists.</p>

<p><a id="X86D1D85F828978AE" name="X86D1D85F828978AE"></a></p>

<h5>8.5-1 IsStringMinHeap</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; IsStringMinHeap</code>( <var class="Arg">arg</var> )</td><td class="tdright">( filter )</td></tr></table></div>
<p>Returns: <code class="code">true</code> or <code class="code">false</code></p>

<p>A string min heap is a min heap where every node contains a string label and an integer key.</p>

<p><a id="X812EDE3F8737AB9D" name="X812EDE3F8737AB9D"></a></p>

<h5>8.5-2 StringMinHeap</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; StringMinHeap</code>( <var class="Arg">arg</var> )</td><td class="tdright">( function )</td></tr></table></div>
<p>Create an empty string min heap.</p>

<p><a id="X80604054823A6F01" name="X80604054823A6F01"></a></p>

<h5>8.5-3 Add</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; Add</code>( <var class="Arg">H</var>, <var class="Arg">string</var>, <var class="Arg">key</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Add a new node containing the label <var class="Arg">string</var> and the key <var class="Arg">key</var> to the heap <var class="Arg">H</var>.</p>

<p><a id="X7E136159853A3BAC" name="X7E136159853A3BAC"></a></p>

<h5>8.5-4 ExtractMin</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; ExtractMin</code>( <var class="Arg">H</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Remove a node with minimal key value from the heap <var class="Arg">H</var>, and return it. The return value is a list <code class="code">[ label, key ]</code>, where <code class="code">label</code> is the extracted node's label (a string) and <code class="code">key</code> is the node's key (an integer).</p>

<p><a id="X79B2FB2178CC6A34" name="X79B2FB2178CC6A34"></a></p>

<h5>8.5-5 DecreaseKey</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; DecreaseKey</code>( <var class="Arg">H</var>, <var class="Arg">string</var>, <var class="Arg">key</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Decrease the key value for the node with label <var class="Arg">string</var> in the heap <var class="Arg">H</var>. The new key value is given by <var class="Arg">key</var> and must be smaller than the node's current value.</p>

<p><a id="X7CEECD45781A49A3" name="X7CEECD45781A49A3"></a></p>

<h5>8.5-6 IsEmptyHeap</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; IsEmptyHeap</code>( <var class="Arg">H</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Returns <code class="code">true</code> if the heap <var class="Arg">H</var> is empty, <code class="code">false</code> otherwise.</p>

<p><a id="X7E1CEFDB7824EE94" name="X7E1CEFDB7824EE94"></a></p>

<h5>8.5-7 HeapSize</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; HeapSize</code>( <var class="Arg">H</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Returns the number of nodes in the heap <var class="Arg">H</var>.</p>

<p><a id="X82F874FB7954D662" name="X82F874FB7954D662"></a></p>

<h5>8.5-8 Contains</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; Contains</code>( <var class="Arg">H</var>, <var class="Arg">string</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Returns <code class="code">true</code> if the heap <var class="Arg">H</var> contains a node with label <var class="Arg">string</var>, and <code class="code">false</code> otherwise.</p>

<p><a id="X7AE2A000800CD0A2" name="X7AE2A000800CD0A2"></a></p>

<h5>8.5-9 Swap</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; Swap</code>( <var class="Arg">H</var>, <var class="Arg">i</var>, <var class="Arg">j</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Swaps two elements in the list used to implement the heap, and updates the heap's internal mapping of labels to list indices. This is an internal function which should only be called from the functions that implement the heap functionality.</p>

<p><a id="X78B8D0BD7A2FE83A" name="X78B8D0BD7A2FE83A"></a></p>

<h5>8.5-10 Heapify</h5>

<div class="func"><table class="func" width="100%"><tr><td class="tdleft"><code class="func">&#8227; Heapify</code>( <var class="Arg">H</var>, <var class="Arg">i</var> )</td><td class="tdright">( operation )</td></tr></table></div>
<p>Heapify the heap <var class="Arg">H</var>, starting from index <var class="Arg">i</var>. This is an internal function.</p>


<div class="chlinkprevnextbot">&nbsp;<a href="chap0.html">[Top of Book]</a>&nbsp;  <a href="chap0.html#contents">[Contents]</a>&nbsp;  &nbsp;<a href="chap7.html">[Previous Chapter]</a>&nbsp;  &nbsp;<a href="chap9.html">[Next Chapter]</a>&nbsp;  </div>


<div class="chlinkbot"><span class="chlink1">Goto Chapter: </span><a href="chap0.html">Top</a>  <a href="chap1.html">1</a>  <a href="chap2.html">2</a>  <a href="chap3.html">3</a>  <a href="chap4.html">4</a>  <a href="chap5.html">5</a>  <a href="chap6.html">6</a>  <a href="chap7.html">7</a>  <a href="chap8.html">8</a>  <a href="chap9.html">9</a>  <a href="chap10.html">10</a>  <a href="chap11.html">11</a>  <a href="chap12.html">12</a>  <a href="chapInd.html">Ind</a>  </div>

<hr />
<p class="foot">generated by <a href="http://www.math.rwth-aachen.de/~Frank.Luebeck/GAPDoc">GAPDoc2HTML</a></p>
</body>
</html>
